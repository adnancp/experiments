<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xs="clr-namespace:System.Xml.Schema;assembly=System.Xml"
        xmlns:l="clr-namespace:WpfApplication1"
        xmlns:wpg="clr-namespace:WPG;assembly=WPG"
        Title="MainWindow"
        Closing="Window_Closing">
    <Window.Resources>
        <l:UnionConverter x:Key="unionConverter" />
        
        <HierarchicalDataTemplate DataType="{x:Type xs:XmlSchemaElement}">
            <HierarchicalDataTemplate.ItemsSource>
                <MultiBinding Converter="{StaticResource unionConverter}">
                    <Binding Path="SchemaType.Attributes" />
                    <Binding Path="SchemaType.Particle.Items" />
                </MultiBinding>
            </HierarchicalDataTemplate.ItemsSource>
            
            <TextBlock Text="{Binding Name}"></TextBlock>
        </HierarchicalDataTemplate>
        
        <DataTemplate DataType="{x:Type xs:XmlSchemaAttribute}">
            <TextBlock FontStyle="Italic" Text="{Binding Name}"></TextBlock>
        </DataTemplate>
    </Window.Resources>
    
    <TabControl TabStripPlacement="Bottom" SelectionChanged="TabControl_SelectionChanged">
        <TabItem x:Name="designerTab" Header="Designer">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
        
                <TreeView x:Name="schemaTree" Grid.Column="0" ItemsSource="{Binding Schema.Items}" />
                <wpg:PropertyGrid Grid.Column="1" Instance="{Binding SelectedItem, ElementName=schemaTree}" />
            </Grid>
        </TabItem>
        
        <TabItem x:Name="sourceTab" Header="Source">
            <Grid>
                <TextBox x:Name="schemaCode" Text="{Binding Code}" />
            </Grid>
        </TabItem>
    </TabControl>
</Window>
